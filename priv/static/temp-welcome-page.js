var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}import Navbar from"./navbar.js";import{TextInput,Button}from"./components/forms/inputs.js";var TempWelcomePage=function(_React$Component){_inherits(TempWelcomePage,_React$Component);function TempWelcomePage(props){_classCallCheck(this,TempWelcomePage);var _this=_possibleConstructorReturn(this,(TempWelcomePage.__proto__||Object.getPrototypeOf(TempWelcomePage)).call(this,props));_this.state={user:{},inviteMail:"",flashMessage:"",flashType:"",showFlash:false};return _this}_createClass(TempWelcomePage,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;http.get("/me").then(function(res){console.log(res.status);console.log(res.data);_this2.setState({user:res.data})}).catch(function(err){console.log(err.response);_this2.showFlashMessage("error",err.response.data||"Une erreur inattendue est survenue.")})}},{key:"sendInviteMail",value:function sendInviteMail(){var _this3=this;http.post("/signup-invite",{email:this.state.inviteMail}).then(function(res){console.log(res.status);console.log(res.data);_this3.showFlashMessage("success","L'invitation a \xE9t\xE9 envoy\xE9e avec succ\xE8s");_this3.setState({inviteMail:""})}).catch(function(err){console.log("error",err);_this3.showFlashMessage("error","Une erreur inattendue est survenue.")})}},{key:"showFlashMessage",value:function showFlashMessage(type,message){var _this4=this;this.setState({showFlash:true,flashMessage:message,flashType:type},function(){setTimeout(function(){_this4.setState({showFlash:false})},5000)})}},{key:"render",value:function render(){var _this5=this;return React.createElement("div",{className:"login-wrapper"},React.createElement(Navbar,{user:this.state.user}),React.createElement("div",{className:"flash-message text-3 "+(this.state.showFlash?" "+this.state.flashType:" hidden")},this.state.flashMessage),React.createElement("h1",{className:"page-title welcome-page-title text-1"},"Vous \xEAtes bien inscrit sur CoachLab !"),React.createElement("div",{className:"welcome-page-content text-2"},"Votre inscription a bien \xE9t\xE9 prise en compte. ",React.createElement("br",null),React.createElement("br",null),"Vous serez pr\xE9venu par mail d\xE8s que la plateforme ouvrira officiellement ses portes.",React.createElement("br",null),React.createElement("br",null),"Merci pour votre int\xE9r\xEAt et \xE0 tr\xE8s bient\xF4t sur CoachLab !"),React.createElement("div",{className:"invite-mail-block "+(this.state.user.role=="coach"?"":" hidden")},React.createElement(TextInput,{type:"email",extraClass:"text-3 bg-white",required:true,value:this.state.inviteMail,onChange:function onChange(e){_this5.setState({inviteMail:e})},name:"invite_mail",placeholder:"Invitez votre coach\xE9"}),React.createElement(Button,{extraClass:"text-3",onClick:function onClick(){_this5.sendInviteMail()},text:"Suivant"})))}}]);return TempWelcomePage}(React.Component);var domContainer=document.querySelector(".temp-welcome-page-wrapper");ReactDOM.render(React.createElement(TempWelcomePage,null),domContainer);