var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}import Navbar from'./components/navbar.js';import{TextInput,Button}from'./components/forms/inputs.js';var Login=function(_React$Component){_inherits(Login,_React$Component);function Login(props){_classCallCheck(this,Login);var _this=_possibleConstructorReturn(this,(Login.__proto__||Object.getPrototypeOf(Login)).call(this,props));_this.state={form:{email:'',password:''},flashMessage:'',flashType:'',showFlash:false};return _this}_createClass(Login,[{key:'sendForm',value:function sendForm(){var _this2=this;http.post('/sign-in',this.state.form).then(function(res){if(res.status==200)window.location.href='/bienvenue';else _this2.showFlashMessage('error','Une erreur est survenue. V\xE9rifiez vos identifiants.')}).catch(function(err){_this2.showFlashMessage('error',err.response.data||'Une erreur inattendue est survenue.')})}},{key:'showFlashMessage',value:function showFlashMessage(type,message){var _this3=this;this.setState({showFlash:true,flashMessage:message,flashType:type},function(){setTimeout(function(){_this3.setState({showFlash:false})},5000)})}},{key:'render',value:function render(){var _this4=this;return React.createElement('div',null,React.createElement(Navbar,{user:{}}),React.createElement('div',{className:'flash-message text-3 '+(this.state.showFlash?' '+this.state.flashType:' hidden')},this.state.flashMessage),React.createElement('h1',{className:'page-title'},'Connectez-vous'),React.createElement('div',{className:'login-content-wrapper infos-form'},React.createElement(TextInput,{extraClass:'white-bg cl-form-input text-3',required:true,value:this.state.form.email,bold_label:true,label:'Adresse mail',onChange:function onChange(e){_this4.setState({form:Object.assign({},_this4.state.form,{email:e})})},name:'email',type:'email',placeholder:'Adresse mail'}),React.createElement(TextInput,{extraClass:'white-bg cl-form-input text-3',required:true,value:this.state.form.password,bold_label:true,label:'Mot de passe',onChange:function onChange(e){_this4.setState({form:Object.assign({},_this4.state.form,{password:e})})},name:'password',type:'password',placeholder:'Mot de passe'}),React.createElement(Button,{extraClass:'text-3 mt-1 white-bg',onClick:function onClick(){_this4.sendForm()},text:'Suivant'}),React.createElement('div',{className:'sign-up-section text-2-5',onClick:function onClick(){window.location.href='/inscription'}},React.createElement('b',null,'Pas encore de compte ? Cliquez-ici pour cr\xE9er le votre'))))}}]);return Login}(React.Component);var domContainer=document.querySelector('.login-wrapper');ReactDOM.render(React.createElement(Login,null),domContainer);