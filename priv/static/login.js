import Navbar from"./components/navbar.js";import Flash from"./components/flash.js";import{TextInput,Button}from"./components/forms/inputs.js";class Login extends React.Component{constructor(props){super(props);this.state={form:{email:"",password:""},flashMessage:"",flashType:"",showFlash:false}}componentDidMount(){http.get("/api/me").then(res=>{if(res.status==200)return window.location.href="/bienvenue"}).catch(_e=>console.log("not auth"))}sendForm(){http.post("/sign-in",this.state.form).then(res=>{if(res.status==200)window.location.href="/bienvenue";else this.showFlashMessage("error","Une erreur est survenue. V\xE9rifiez vos identifiants.")}).catch(err=>{this.showFlashMessage("error",err?.response?.data||"Une erreur inattendue est survenue.")})}showFlashMessage(type,message){this.setState({showFlash:true,flashMessage:message,flashType:type},()=>{setTimeout(()=>{this.setState({showFlash:false})},5000)})}render(){return/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement(Navbar,{user:{}}),/*#__PURE__*/React.createElement(Flash,{showFlash:this.state.showFlash,flashType:this.state.flashType,flashMessage:this.state.flashMessage}),/*#__PURE__*/React.createElement("h1",{className:"page-title"},"Connectez-vous"),/*#__PURE__*/React.createElement("div",{className:"login-content-wrapper infos-form"},/*#__PURE__*/React.createElement(TextInput,{onKeyDown:event=>{if(event.key==="Enter")this.sendForm()},extraClass:"white-bg cl-form-input text-3",required:true,value:this.state.form.email,bold_label:true,label:"Adresse mail",onChange:e=>{this.setState({form:{...this.state.form,email:e}})},name:"email",type:"email",placeholder:"Adresse mail"}),/*#__PURE__*/React.createElement(TextInput,{onKeyDown:event=>{if(event.key==="Enter")this.sendForm()},extraClass:"white-bg cl-form-input text-3",required:true,value:this.state.form.password,bold_label:true,label:"Mot de passe",onChange:e=>{this.setState({form:{...this.state.form,password:e}})},name:"password",type:"password",placeholder:"Mot de passe"}),/*#__PURE__*/React.createElement(Button,{extraClass:"text-3 mt-1 white-bg",onClick:()=>{this.sendForm()},text:"Suivant"}),/*#__PURE__*/React.createElement("a",{className:"sign-up-section text-2-5",href:"/inscription"},/*#__PURE__*/React.createElement("b",null,"Pas encore de compte ? Cliquez-ici pour cr\xE9er le votre")),/*#__PURE__*/React.createElement("a",{className:"sign-up-section text-3",href:"/nouveau-mot-de-passe"},/*#__PURE__*/React.createElement("b",null,"Vous avez oubli\xE9 votre mot de passe ?"))))}}const domContainer=document.querySelector(".login-wrapper");ReactDOM.render(/*#__PURE__*/React.createElement(Login,null),domContainer);