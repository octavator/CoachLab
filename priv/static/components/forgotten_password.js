import http from"../http.js";import Navbar from"./navbar.js";import Flash from"./flash.js";import{TextInput,Button}from"./forms/inputs.js";class ForgottenPassword extends React.Component{constructor(props){super(props);this.state={showFlash:false,flashType:"",flashMessage:"",password:"",password_check:""}}showFlashMessage(type,message){this.setState({showFlash:true,flashMessage:message,flashType:type},()=>{setTimeout(()=>{this.setState({showFlash:false})},5000)})}sendForm(){const urlParams=new URLSearchParams(document.location.search);const token=urlParams.get("token");http.post(`/api/change_password`,{password:this.state.password,token:token}).then(res=>{if(res.status==200)window.location.href="/connexion";else this.showFlashMessage("error","Une erreur inattendue est survenue")}).catch(err=>{this.showFlashMessage("error","Une erreur inattendue est survenue")})}render(){return/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement(Navbar,{user:{},blue_bg:true}),/*#__PURE__*/React.createElement(Flash,{showFlash:this.state.showFlash,flashType:this.state.flashType,flashMessage:this.state.flashMessage}),/*#__PURE__*/React.createElement("div",{className:"infos-wrapper flex flex-center flex-column"},/*#__PURE__*/React.createElement(TextInput,{type:"password",extraClass:"text-3 white-bg",required:true,value:this.state.password,onChange:e=>{this.setState({password:e})},placeholder:"********",name:"password",bold_label:true,label:"Nouvreau mot de passe"}),/*#__PURE__*/React.createElement(TextInput,{type:"password",extraClass:"text-3 white-bg",required:true,value:this.state.password_check,onChange:e=>this.setState({password_check:e}),placeholder:"********",name:"password_check",bold_label:true,label:"Confirmez le mot de passe"}),/*#__PURE__*/React.createElement(Button,{extraClass:"text-3 white-bg cl-form-button",onClick:()=>this.sendForm(),text:"Valider"})))}}const domContainer=document.querySelector(".forgotten-password");const root=ReactDOM.createRoot(domContainer);root.render(/*#__PURE__*/React.createElement(ForgottenPassword,null));