import http from"../http.js";import Navbar from"./navbar.js";import Flash from"./flash.js";import{Button}from"./forms/inputs.js";class Invoice extends React.Component{constructor(props){super(props);this.state={showFlash:false,flashType:"",flashMessage:"",user:{firstname:"",lastname:"",role:"coach"},resa:{}}}componentDidMount(){const urlParams=new URLSearchParams(document.location.search);const resa_id=urlParams.get("resa_id");http.get("/api/me").then(userData=>{http.get(`/api/reservation/${encodeURIComponent(resa_id)}`).then(resaData=>{this.setState({user:userData.data,resa:resaData.data})}).catch(err=>{this.showFlashMessage("error",err?.response?.data||"Une erreur inattendue est survenue.")})}).catch(err=>{this.showFlashMessage("error",err?.response?.data||"Une erreur inattendue est survenue.")})}showFlashMessage(type,message){this.setState({showFlash:true,flashMessage:message,flashType:type},()=>{setTimeout(()=>{this.setState({showFlash:false})},5000)})}render(){return/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement(Navbar,{user:this.state.user,blue_bg:true}),/*#__PURE__*/React.createElement(Flash,{showFlash:this.state.showFlash,flashType:this.state.flashType,flashMessage:this.state.flashMessage}),"Vous pouvez acc\xE9der \xE0 votre Facture pour la r\xE9servation du XXXX avec XXXX en cliquant sur ce bouton.",/*#__PURE__*/React.createElement(Button,{text:"T\xE9l\xE9charger",onClick:()=>window.print()}),/*#__PURE__*/React.createElement("div",{className:"invoice-wrapper"},/*#__PURE__*/React.createElement("div",{className:"seller-wrapper"},/*#__PURE__*/React.createElement("b",null,"CoachLab")," ",/*#__PURE__*/React.createElement("br",null),"Adresse: ",/*#__PURE__*/React.createElement("br",null),"SIREN: ",/*#__PURE__*/React.createElement("br",null),"T\xE9l\xE9phone: ",/*#__PURE__*/React.createElement("br",null),"Email: contact@coachlab.fr ",/*#__PURE__*/React.createElement("br",null)),/*#__PURE__*/React.createElement("div",{className:"buyer-wrapper"},"Pr\xE9nom: ",this.state.user.firstname,/*#__PURE__*/React.createElement("br",null),"Nom: ",this.state.user.lastname,/*#__PURE__*/React.createElement("br",null)),/*#__PURE__*/React.createElement("div",{className:"transaction-details-wrapper"},/*#__PURE__*/React.createElement("table",null,/*#__PURE__*/React.createElement("tr",null,/*#__PURE__*/React.createElement("th",null,"D\xE9signation du produit"),/*#__PURE__*/React.createElement("th",null,"Quantit\xE9"),/*#__PURE__*/React.createElement("th",null,"Prix HT"),/*#__PURE__*/React.createElement("th",null,"Prix TTC")),/*#__PURE__*/React.createElement("tr",null,/*#__PURE__*/React.createElement("td",null,`Séance de coaching ${this.state.resa["isMulti"]?"de groupe":"individuelle"}`),/*#__PURE__*/React.createElement("td",null,"1"),/*#__PURE__*/React.createElement("td",null,`${((this.state.resa?.price||50)*0.8).toFixed(2)}€`),/*#__PURE__*/React.createElement("td",null,`${(this.state.resa?.price||50).toFixed(2)}€`)))),/*#__PURE__*/React.createElement("div",{className:"transaction-summary"},`Total HT: ${((this.state.resa?.price||50)*0.8).toFixed(2)}€`," ",/*#__PURE__*/React.createElement("br",null),"TVA: 20% ",/*#__PURE__*/React.createElement("br",null),`Total TTC: ${(this.state.resa?.price||50).toFixed(2)}€`," ",/*#__PURE__*/React.createElement("br",null))))}}const domContainer=document.querySelector(".invoice");const root=ReactDOM.createRoot(domContainer);root.render(/*#__PURE__*/React.createElement(Invoice,null));