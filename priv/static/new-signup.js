var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}import{TextInput,FileInput}from"./components/forms/inputs.js";import FirstStep from"./components/signup/first-step.js";import CoachSecondStep from"./components/signup/coach/second-step.js";import DefaultSecondStep from"./components/signup/default/second-step.js";import CoachThirdStep from"./components/signup/coach/third-step.js";import DefaultThirdStep from"./components/signup/default/third-step.js";import Navbar from"./navbar.js";var SignUp=function(_React$Component){_inherits(SignUp,_React$Component);function SignUp(props){_classCallCheck(this,SignUp);var _this=_possibleConstructorReturn(this,(SignUp.__proto__||Object.getPrototypeOf(SignUp)).call(this,props));_this.state={form:{},steps:[1,2,3],step:1,flashMessage:"",flashType:"",showFlash:false};return _this}_createClass(SignUp,[{key:"sendForm",value:function sendForm(){var _this2=this;console.log(this.state.form);http.post("/sign-up",this.state.form).then(function(res){console.log(res.status);console.log(res.data);window.location.href="/bienvenue"}).catch(function(err){console.log(err.response);_this2.showFlashMessage("error",err.response.data||"Une erreur inattendue est survenue.")})}},{key:"setStateForm",value:function setStateForm(new_form){var _this3=this;var is_complete=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is_complete)this.setState({form:Object.assign({},this.state.form,new_form)});else{this.setState({form:Object.assign({},this.state.form,new_form)},function(){_this3.sendForm()})}}},{key:"showFlashMessage",value:function showFlashMessage(type,message){var _this4=this;this.setState({showFlash:true,flashMessage:message,flashType:type},function(){setTimeout(function(){_this4.setState({showFlash:false})},5000)})}},{key:"render",value:function render(){var _this5=this;console.log("main form: ",this.state.form);return React.createElement("div",{className:"clab-container"},React.createElement(Navbar,{blue_bg:this.state.step==1?false:true,user:{}}),React.createElement("div",{className:"flash-message text-3 "+(this.state.showFlash?" "+this.state.flashType:" hidden")},this.state.flashMessage),this.state.step==1?React.createElement(FirstStep,{showFlashMessage:this.showFlashMessage,update_form:function update_form(data){_this5.setStateForm(data)},change_step:function change_step(new_step){_this5.setState({step:new_step})}}):this.state.form.role=="coach"?this.state.step==2?React.createElement(CoachSecondStep,{user_form:this.state.form,showFlashMessage:function showFlashMessage(type,msg){return _this5.showFlashMessage(type,msg)},update_form:function update_form(data,is_complete){_this5.setStateForm(data,is_complete)},change_step:function change_step(new_step){_this5.setState({step:new_step})}}):React.createElement(CoachThirdStep,{user_form:this.state.form,showFlashMessage:function showFlashMessage(type,msg){return _this5.showFlashMessage(type,msg)},send_form:function send_form(){return _this5.sendForm()},update_form:function update_form(data,is_complete){_this5.setStateForm(data,is_complete)},change_step:function change_step(new_step){_this5.setState({step:new_step})}}):this.state.step==2?React.createElement(DefaultSecondStep,{user_form:this.state.form,showFlashMessage:function showFlashMessage(type,msg){return _this5.showFlashMessage(type,msg)},update_form:function update_form(data){var is_complete=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_this5.setStateForm(data,is_complete)},change_step:function change_step(new_step){_this5.setState({step:new_step})}}):React.createElement(DefaultThirdStep,{user_form:this.state.form,showFlashMessage:function showFlashMessage(type,msg){return _this5.showFlashMessage(type,msg)},send_form:function send_form(){return _this5.sendForm()},update_form:function update_form(data,is_complete){_this5.setStateForm(data,is_complete)},change_step:function change_step(new_step){_this5.setState({step:new_step})}}))}}]);return SignUp}(React.Component);var domContainer=document.querySelector(".signup-wrapper");ReactDOM.render(React.createElement(SignUp,null),domContainer);