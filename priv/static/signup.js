var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}import TextInput from"./components/forms/inputs.js";import Navbar from"./navbar.js";var SignUp=function(_React$Component){_inherits(SignUp,_React$Component);function SignUp(props){_classCallCheck(this,SignUp);var _this=_possibleConstructorReturn(this,(SignUp.__proto__||Object.getPrototypeOf(SignUp)).call(this,props));_this.state={form:{email:"",password:"",firstname:"",lastname:""},flashMessage:"",flashType:"",showFlash:false};return _this}_createClass(SignUp,[{key:"sendForm",value:function sendForm(){var _this2=this;http.post("/sign-up",this.state.form).then(function(res){console.log(res.status);console.log(res.data);window.location.href="/connexion"}).catch(function(err){console.log(err.response);_this2.showFlashMessage("error",err.response.data||"Une erreur inattendue est survenue.")})}},{key:"showFlashMessage",value:function showFlashMessage(type,message){var _this3=this;this.setState({showFlash:true,flashMessage:message,flashType:type},function(){setTimeout(function(){_this3.setState({showFlash:false})},5000)})}},{key:"render",value:function render(){var _this4=this;return React.createElement("div",null,React.createElement(Navbar,{user:{}}),React.createElement("div",{className:"flash-message"+(this.state.showFlash?" "+this.state.flashType:" hidden")},this.state.flashMessage),React.createElement("h1",{className:"page-title"},"Inscrivez-vous"),React.createElement("div",{className:"login-content-wrapper infos-form"},React.createElement("div",{className:"input-group"},React.createElement("label",{className:"input-label"},"Adresse mail"),React.createElement("input",{onChange:function onChange(e){_this4.setState({form:Object.assign({},_this4.state.form,{email:e.target.value})})},value:this.state.form.email,type:"email"})),React.createElement("div",{className:"input-group"},React.createElement("label",{className:"input-label"},"Mot de passe"),React.createElement("input",{onChange:function onChange(e){_this4.setState({form:Object.assign({},_this4.state.form,{password:e.target.value})})},value:this.state.form.password,type:"password"})),React.createElement(TextInput,{value:this.state.form.firstname,on_change:function on_change(e){_this4.setState({form:Object.assign({},_this4.state.form,{firstname:e.target.value})})},label:"Pr\xE9nom"}),React.createElement(TextInput,{value:this.state.form.lastname,on_change:function on_change(e){_this4.setState({form:Object.assign({},_this4.state.form,{lastname:e.target.value})})},label:"Nom"}),React.createElement("div",{className:"input-group"},React.createElement("div",{className:"button-group"},React.createElement("button",{onClick:function onClick(){_this4.sendForm()},className:"cl-button primary"},"Valider")))))}}]);return SignUp}(React.Component);var domContainer=document.querySelector(".signup-wrapper");ReactDOM.render(React.createElement(SignUp,null),domContainer);